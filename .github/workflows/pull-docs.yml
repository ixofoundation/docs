name: Copy .md from ixo-blockchain
run-name: ${{ github.actor }} pushed a change.
on: [push]
jobs:
  copy-docs-from-blockchain-repo:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          ref: alwyn-ixopatch-1

      - name: Checkout ixo-blockchain
        uses: actions/checkout@v4
        with:
          repository: ixofoundation/ixo-blockchain
          ref: develop
          path: ixo-blockchain
      
      - name: Checkout ixo-signx
        uses: actions/checkout@v4
        with:
          repository: ixofoundation/ixo-signx
          ref: main
          path: ixo-signx
      
      - name: Checkout ixo-message-relayer
        uses: actions/checkout@v4
        with:
          repository: ixofoundation/ixo-message-relayer
          ref: main
          path: ixo-message-relayer

      - run: mkdir -p ./developers/ixo-blockchain
      - run: find ./ixo-blockchain -type f -name "*.md" -exec cp -R {} ./developers/ixo-blockchain \;
      - run: ls -al ./developers/ixo-blockchain
      
      - run: mkdir -p ./developers/ixo-signx
      - run: find ./ixo-signx -type f -name "*.md" -exec cp -R {} ./developers/ixo-signx \;
      - run: ls -al ./developers/ixo-signx
      
      - run: mkdir -p ./developers/ixo-message-relayer
      - run: find ./ixo-message-relayer -type f -name "*.md" -exec cp -R {} ./developers/ixo-message-relayer \;
      - run: ls -al ./developers/ixo-message-relayer
      
      - run: git add .
      - run: git config --global user.email "ixo@ixo.world"
      - run: git config --global user.name ${{ github.actor }}
      - run: git commit -m "Copy *.md files from other repos"
      # - run: git config --global --add safe.directory /home/runner/work/docs/docs
      - run: git push
